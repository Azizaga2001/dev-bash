<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link type="image/x-icon" href="/img/2bdb608b-eddc-434d-b235-e95d2addc386.png" rel="shortcut icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Dev-Bash WRLD</title>
</head>

<body>
    <!-- Bootstrap CSS (если ещё не подключён) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- Окно согласия на Cookie -->

    <body class="bg-light">
        <div id="cookieConsent" class="modal fade show" tabindex="-1" role="dialog"
            style="display:block; background:rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content shadow-lg">
                    <div class="modal-header bg-dark text-white">
                        <h5 class="modal-title"><i class="fa fa-cookie-bite"></i> Cookie Consent</h5>
                    </div>
                    <div class="modal-body">
                        <p>This site uses cookies to store your data and improve the site.<br>
                            By continuing, you agree to our <a href="/cookies" class="text-primary">cookie policy</a>.
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button id="acceptCookieBtn" class="btn btn-success">Accept</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="orderFormWrapper" class="container p-5" style="max-width: 500px; display:none;">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fa fa-user"></i> Enter your contact data</h5>
                </div>
                <div class="card-body">
                    <form id="orderForm" method="post" action="/send-contact">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" name="name" id="name" placeholder="Your name"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" name="email" id="email" placeholder="Email"
                                required pattern="^[\w\.-]+@[\w\.-]+\.\w{2,}$">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" class="form-control" name="phone" id="phone" placeholder="+79991234567"
                                required pattern="^\+?\d{10,15}$" title="Enter number like +79991234567">
                        </div>
                        <div class="form-group">
                            <label for="birthdate">Birthdate</label>
                            <input type="date" class="form-control" name="birthdate" id="birthdate" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">Continue</button>
                    </form>
                </div>
            </div>
        </div>

        <script>
            function getCookie(name) {
                let matches = document.cookie.match(new RegExp(
                    "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
                ));
                return matches ? decodeURIComponent(matches[1]) : undefined;
            }

            function showConsent() {
                document.getElementById('cookieConsent').style.display = 'block';
                document.getElementById('orderFormWrapper').style.display = 'none';
            }
            function showForm() {
                document.getElementById('cookieConsent').style.display = 'none';
                document.getElementById('orderFormWrapper').style.display = 'block';
            }
            function hideAll() {
                document.getElementById('cookieConsent').style.display = 'none';
                document.getElementById('orderFormWrapper').style.display = 'none';
            }

            if (getCookie('order_submitted') === 'true') {
                hideAll();
                window.location.href = "/home-en";
            } else if (getCookie('cookie_accepted') === 'true') {
                showForm();
            } else {
                showConsent();
            }

            document.getElementById('acceptCookieBtn').onclick = function () {
                document.cookie = "cookie_accepted=true; max-age=31536000; path=/";
                showForm();
            };

            document.getElementById('orderForm').addEventListener('submit', function () {
                document.cookie = "order_submitted=true; max-age=1209600; path=/";
            });
        </script>
        <!-- JS-логика -->
        <!-- <script>
            function getCookie(name) {
                let matches = document.cookie.match(new RegExp(
                    "(?:^|; )" + name.replace(/([\.$?*|{ }\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
                ));
                return matches ? decodeURIComponent(matches[1]) : undefined;
            }

            // Скрываем/показываем модальное окно и форму
            function showConsent() {
                document.getElementById('cookieConsent').style.display = 'block';
                document.getElementById('orderFormWrapper').style.display = 'none';
            }
            function showForm() {
                document.getElementById('cookieConsent').style.display = 'none';
                document.getElementById('orderFormWrapper').style.display = 'block';
            }
            function hideAll() {
                document.getElementById('cookieConsent').style.display = 'none';
                document.getElementById('orderFormWrapper').style.display = 'none';
            }

            if (getCookie('order_submitted') === 'true') {
                hideAll();
            } else if (getCookie('cookie_accepted') === 'true') {
                showForm();
            } else {
                showConsent();
            }

            document.getElementById('acceptCookieBtn').onclick = function () {
                document.cookie = "cookie_accepted=true; max-age=31536000; path=/";
                showForm();
            };

            document.getElementById('orderForm').addEventListener('submit', function () {
                document.cookie = "order_submitted=true; max-age=1209600; path=/";
                // document.getElementById('orderFormWrapper').style.display = 'none'; // Можно скрыть форму после отправки
            });

            // Пример: перед отправкой формы заполни поле items из корзины
            // function getCartItemsAsString() {
            //     // Здесь твоя логика получения товаров из корзины
            //     return "Товар 1, Товар 2";
            // }
            // document.getElementById('orderForm').addEventListener('submit', function () {
            //     document.getElementById('itemsInput').value = getCartItemsAsString();
            // });
        </script> -->
        <!-- Подключение необходимых скриптов -->

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        <script
            src="https://www.paypal.com/sdk/js?client-id=ASrX5eoMyqXS_abvLzW885ym0hj4tMURDikDfCE7dwkkv_0X5a4X0brZvfBSiKosBYnKv8PxEm4v4LrS"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
        <script src="/js/main.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

</html>
</body>